{
  "id": "snapshot_1770885190158_s2cdwb4d4",
  "approvalId": "approval_1770885190153_v6j8zvjb5",
  "approvalTitle": "Tech Steering Document - 技術スタック定義",
  "version": 1,
  "timestamp": "2026-02-12T08:33:10.158Z",
  "trigger": "initial",
  "status": "pending",
  "content": "# Technology Stack\n\n## Project Type\n\nRESTful API バックエンドサービス。採用情報のスクリーニングを行うHTTP APIを提供します。\n\n## Core Technologies\n\n### Primary Language(s)\n\n- **Language**: Python 3.12\n- **Runtime**: CPython 3.12.x\n- **Language-specific tools**:\n  - `uv`: モダンなPythonパッケージマネージャー（高速依存関係解決とプロジェクト管理）\n  - `ruff`: 高速なLinter/Formatter（Rustベース）\n\n### Key Dependencies/Libraries\n\n- **FastAPI**: 最新バージョン - 高性能な非同期Webフレームワーク、自動OpenAPI生成機能\n- **pytest**: 最新バージョン - Pythonの標準的なテストフレームワーク\n- **pydantic**: FastAPIに含まれる - データバリデーションとシリアライゼーション\n\n### Application Architecture\n\n**オニオンアーキテクチャ** + **ドメイン駆動設計（DDD）** を採用：\n\n```\n┌─────────────────────────────────────────┐\n│     Presentation Layer (FastAPI)        │ ← HTTPエンドポイント、リクエスト/レスポンス処理\n├─────────────────────────────────────────┤\n│      Application Layer (Use Cases)      │ ← ビジネスロジックのオーケストレーション\n├─────────────────────────────────────────┤\n│       Domain Layer (Core Business)      │ ← エンティティ、バリューオブジェクト、ドメインサービス\n├─────────────────────────────────────────┤\n│   Infrastructure Layer (Persistence)    │ ← データアクセス、外部システム連携\n└─────────────────────────────────────────┘\n```\n\n**依存関係のルール**:\n- 外側の層は内側の層に依存できる\n- 内側の層は外側の層に依存してはいけない（依存性逆転の原則）\n- ドメイン層はフレームワークに依存しない純粋なビジネスロジック\n\n### Data Storage (if applicable)\n\n初期実装では永続化層は不要：\n\n- **Primary storage**: なし（暫定実装では固定レスポンスを返すため、データ保存不要）\n- **Caching**: なし（初期実装対象外）\n- **Data formats**: JSON（API入出力形式）\n\n将来的には以下を検討：\n- SQLiteまたはPostgreSQLによる評価結果の保存\n- Redisによるキャッシング\n\n### External Integrations (if applicable)\n\n初期実装では外部連携なし：\n\n- **APIs**: なし（初期実装対象外）\n- **Protocols**: HTTP/REST のみ\n- **Authentication**: なし（認証・認可は外部サービスに委ねる設計）\n\n将来的には以下を検討：\n- 機械学習APIとの連携（スクリーニングロジックの高度化）\n- 認証サービス（Auth0、Firebase Auth等）との統合\n\n### Monitoring & Dashboard Technologies (if applicable)\n\n専用ダッシュボードは提供しない：\n\n- **Dashboard Framework**: なし\n- **Real-time Communication**: なし\n- **Visualization Libraries**: なし\n- **State Management**: なし\n\n運用監視は外部APMツール（Datadog、New Relic等）やログ集約システム（ELK、CloudWatch Logs等）の利用を想定。\n\n## Development Environment\n\n### Build & Development Tools\n\n- **Build System**: `uv` による依存関係管理とビルド\n- **Package Management**: `uv` - pyproject.toml ベースの管理\n- **Development workflow**:\n  - `uv run fastapi dev` - 開発サーバー起動（ホットリロード対応）\n  - `uv run pytest` - テスト実行\n\n### Code Quality Tools\n\n- **Static Analysis**: `ruff check` - 高速Linter（Flake8、isort、pyupgrade等の機能を統合）\n- **Formatting**: `ruff format` - 高速Formatter（Black互換）\n- **Testing Framework**: `pytest` - ユニットテスト、統合テスト\n- **Documentation**: FastAPIの自動OpenAPI生成（/docs、/redoc エンドポイント）、`openapi.yaml` 出力\n\n### Version Control & Collaboration\n\n- **VCS**: Git\n- **Branching Strategy**: GitHub Flow（主要ブランチ：main、フィーチャーブランチから直接マージ）\n- **Code Review Process**:\n  - プルリクエストベースのレビュー\n  - 1つのIssueに対して1つのPRを作成\n  - GitHub CLIを活用した自動化\n\n### Dashboard Development (if applicable)\n\n該当なし（専用ダッシュボードは提供しない）\n\n## Deployment & Distribution (if applicable)\n\n- **Target Platform(s)**: Linuxサーバー、コンテナ環境（Docker/Kubernetes想定）\n- **Distribution Method**:\n  - Dockerイメージとして配布\n  - または `uv` による直接インストール\n- **Installation Requirements**:\n  - Python 3.12以上\n  - `uv` パッケージマネージャー\n- **Update Mechanism**:\n  - コンテナイメージの更新\n  - または `uv sync` による依存関係更新\n\n## Technical Requirements & Constraints\n\n### Performance Requirements\n\n- **API応答時間**: 95パーセンタイルで500ms以内\n- **スループット**: 初期目標 100 req/sec（単一インスタンス）\n- **メモリ使用量**: 512MB以内（コンテナ環境想定）\n- **起動時間**: 5秒以内\n\n### Compatibility Requirements\n\n- **Platform Support**: Linux（Ubuntu 22.04以降推奨）、macOS（開発環境のみ）\n- **Dependency Versions**:\n  - Python 3.12以上\n  - FastAPI最新安定版\n- **Standards Compliance**:\n  - OpenAPI 3.1仕様準拠\n  - RESTful API設計原則\n\n### Security & Compliance\n\n- **Security Requirements**:\n  - 初期実装では認証・認可なし（外部サービスに委ねる）\n  - HTTPS通信（リバースプロキシ層で実装）\n  - 入力バリデーション（Pydanticによる自動バリデーション）\n- **Compliance Standards**: なし（初期実装対象外）\n- **Threat Model**:\n  - インジェクション攻撃対策（Pydanticバリデーション）\n  - DoS攻撃対策（レートリミットは外部ゲートウェイに委ねる）\n\n### Scalability & Reliability\n\n- **Expected Load**: 初期段階では小～中規模（〜1000 req/sec）\n- **Availability Requirements**: 99%以上の稼働率目標\n- **Growth Projections**: 水平スケーリング可能なステートレス設計\n\n## Technical Decisions & Rationale\n\n### Decision Log\n\n1. **Python 3.12 + FastAPI**:\n   - **選定理由**: 高速な開発サイクル、優れたOpenAPI自動生成、Pydanticによる型安全性\n   - **代替案**: Go（より高速だが開発速度で劣る）、Node.js（JavaScript生態系、型安全性で劣る）\n\n2. **オニオンアーキテクチャ + DDD**:\n   - **選定理由**: ビジネスロジックとインフラ層の分離、テスタビリティ向上、将来の機能拡張に対応\n   - **トレードオフ**: 初期の開発コストは増加するが、長期的な保守性を優先\n\n3. **uv パッケージマネージャー**:\n   - **選定理由**: pip/poetryより高速、pyproject.toml標準準拠、モダンな依存関係解決\n   - **代替案**: poetry（成熟しているが速度で劣る）、pip + pip-tools（従来型、機能不足）\n\n4. **ruff Linter/Formatter**:\n   - **選定理由**: 従来ツール（Black, Flake8, isort等）の10〜100倍高速、オールインワンツール\n   - **代替案**: Black + Flake8（複数ツールの組み合わせ、速度で劣る）\n\n5. **認証・認可の除外**:\n   - **選定理由**: 初期実装ではスクリーニングロジックに集中、認証は外部サービス（APIゲートウェイ、Auth0等）に委ねる\n   - **トレードオフ**: 独立したAPIとして機能しないが、アーキテクチャがシンプルになる\n\n## Known Limitations\n\n初期実装における技術的制約：\n\n- **暫定スクリーニングロジック**: 固定レスポンスを返すのみ。機械学習モデルやルールエンジンは将来実装\n- **認証・認可なし**: 外部システムでの実装を前提とし、API単体では認証機能を持たない\n- **永続化層なし**: 初期実装ではデータ保存を行わない。将来的にはデータベース統合が必要\n- **非同期処理なし**: 大量データの一括処理には非対応。将来的にはCelery等のタスクキューを検討\n- **監視機能なし**: 専用ダッシュボードなし。外部APM/ログツールとの連携を想定\n",
  "fileStats": {
    "size": 8730,
    "lines": 191,
    "lastModified": "2026-02-12T08:33:05.263Z"
  },
  "comments": []
}